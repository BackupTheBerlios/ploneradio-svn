<html xmlns:tal="http://xml.zope.org/namespaces/tal"      xmlns:metal="http://xml.zope.org/namespaces/metal"      xmlns:i18n="http://xml.zope.org/namespaces/i18n"      i18n:domain="PloneRadio"><body><div metal:define-macro="portlet">	<!-- not the best way to do this, but i don't know how to fill the css slot for a portlet -->	<link rel="stylesheet" type="text/css" media="screen" href="" tal:attributes="href string:PloneRadio.css" />    <div class="portlet" id="portlet-static">        <h5 i18n:translate="box_statis">Radio</h5>        <div class="portletBody">    	  <script type="text/javascript" language="javascript">		  <!--			// Abfrage der Browser-Platform (Mac/PC)			var av = ' ' + navigator.appVersion.toLowerCase();			var is_mac = av.indexOf('mac') > 0;			var is_win = av.indexOf('win') > 0;						// some blackmagic with supported plugins and icons on			// different platforms ;-)			document["winamp1"] = new Image();			document["winamp2"] = new Image();			document["winamp3"] = new Image();			document["winamp4"] = new Image();			document.hidewindowsmedia1 = new Image();			document.hidewindowsmedia2 = new Image();			document.hidewindowsmedia3 = new Image();			document.hidewindowsmedia4 = new Image();			image1 = new Image();			image1.src = "playericon_itunes.gif";		  //-->		  </script>		  <tal:block tal:condition="python: test(context.portal_ploneradiotool.getProperty('stream1_enable'))">		    <div class="PloneRadio_portlet_streamname" tal:content="python: context.portal_ploneradiotool.getProperty('stream1_name')">xxx</div>		    <div class="PloneRadio_portlet_playerselect">		      <div style="text-align: center;				          background-color: red;				          font-size: 20px;				          font-weight: bold;				          color: white;">				<a href="" tal:attributes="href python: 'portal_ploneradiotool/generatePlaylist?url=' +  context.portal_ploneradiotool.getProperty('stream1_url1') + '&type=m3u'" style="color: white;">Play now!</a>			  </div>			  <div class="PloneRadio_portlet_players">			    <span i18n:translate="text_listenplugin" omit-tag="">listen with plugin:</span><br/>			    <a href="" tal:attributes="href python: 'portal_ploneradiotool/generatePlaylist?url=' +  context.portal_ploneradiotool.getProperty('stream1_url1') + '&type=m3u'">						  <img name="winamp1" src="playericon_winamp.gif" title="MP3 Player" height="24" border="0" align="middle" /></a>                <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=1&plugin=quicktime&quality=1','','scrollbars=no,menubar=no,height=65,width=250,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_quicktime.gif" title="Quicktime-Plugin" height="24" border="0" align="middle" /></a>			    <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=1&plugin=windowsmedia&quality=1','','scrollbars=no,menubar=no,height=165,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img id="hidewindowsmedia1" src="playericon_windowsmedia.gif" title="Windowsmedia-Plugin" height="24" border="0" align="middle" /></a>		        <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=1&plugin=java&quality=1','','scrollbars=no,menubar=no,height=115,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_java.gif" title="Java-Plugin" height="24" border="0" align="middle" />			    </a>			    <span tal:replace="python:context.portal_ploneradiotool.getProperty('stream1_url1_remarks')" tal:condition="python:test(context.portal_ploneradiotool.getProperty('stream1_url1_remarks'))">quality1</span>			  </div>			  <div class="PloneRadio_portlet_players" tal:condition="python:test(context.portal_ploneradiotool.getProperty('stream1_url2'))">			    <a href="" tal:attributes="href python: 'portal_ploneradiotool/generatePlaylist?url=' +  context.portal_ploneradiotool.getProperty('stream1_url2') + '&type=m3u'">						  <img name="winamp2" src="playericon_winamp.gif" alt="Winamp Plugin" height="24" border="0" align="middle" /></a>                <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=1&plugin=quicktime&quality=2','','scrollbars=no,menubar=no,height=65,width=250,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_quicktime.gif" alt="Quicktime-Plugin" height="24" border="0" align="middle" /></a>			    <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=1&plugin=windowsmedia&quality=2','','scrollbars=no,menubar=no,height=165,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img id="hidewindowsmedia2" src="playericon_windowsmedia.gif" alt="Windowsmedia-Plugin" height="24" border="0" align="middle" /></a>		        <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=1&plugin=java&quality=2','','scrollbars=no,menubar=no,height=115,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_java.gif" alt="Java-Plugin" height="24" border="0" align="middle" />			    </a>			    <span tal:replace="python:context.portal_ploneradiotool.getProperty('stream1_url2_remarks')" tal:condition="python:test(context.portal_ploneradiotool.getProperty('stream1_url2_remarks'))">quality1</span>			  </div>		    </div>						<tal:block tal:condition="python: test(context.portal_ploneradiotool.getProperty('stream1_loganalysis_enable'))">			  <tal:block tal:define="stream1 python:context.portal_ploneradiotool.getRecentSongs('1')" tal:condition="python: test(stream1[0] != 1)">                <div class="PloneRadio_portlet_current_head">                  <span i18n:translate="text_nowplaying" omit-tag="">now playling:</span>                </div>                <div class="PloneRadio_portlet_current">                  <div class="PloneRadio_portlet_artist" tal:content="structure python:stream1[1][0]+':'">Artist</div>                  <div class="PloneRadio_portlet_title" tal:content="structure python:'&quot;'+stream1[1][1]+'&quot;'">Title</div>                  <div class="PloneRadio_portlet_album" tal:condition="python: test(context.portal_ploneradiotool.getProperty('stream1_loganalysis_album_url') != '')">                    <img src="" alt="Album Cover" align="middle" tal:attributes="src python:context.portal_ploneradiotool.getProperty('stream1_loganalysis_album_url')"  />                  </div>                  <div class="PloneRadio_portlet_listeners" tal:condition="python: test((stream1[3] == 'icecast2') & test(context.portal_ploneradiotool.getProperty('stream1_loganalysis_showlisteners'), 1, 0))">                    Derzeit <span tal:replace="python:stream1[4]">0</span> H&ouml;rer                  </div>                </div>                <tal:block tal:condition="python:test((stream1[3] == 'nicecast') & (context.portal_ploneradiotool.getProperty('stream1_loganalysis_recentsongstolist') > 0))">                  <div class="PloneRadio_portlet_recent_head">                    <span i18n:translate="text_recentlyplayed" omit-tag="">recent tracks:</span>                  </div>                  <div class="PloneRadio_portlet_recent" tal:repeat="track python:stream1[2]">                    <tal:block tal:condition="python:test(track[0] != '')">                      <div class="artist" tal:content="python:track[0]+':'">Artist</div>                      <div class="title" tal:content="python:'&quot;'+track[1]+'&quot;'">Title</div>                    </tal:block>                  </div>                </tal:block>              </tal:block>            </tal:block>          </tal:block>                    <tal:block tal:condition="python: test(context.portal_ploneradiotool.getProperty('stream2_enable'))">		    <br/>		    <div class="PloneRadio_portlet_streamname" tal:content="python: context.portal_ploneradiotool.getProperty('stream2_name')">xxx</div>		    <div class="PloneRadio_portlet_playerselect">		      <div style="text-align: center;				          background-color: red;				          font-size: 20px;				          font-weight: bold;				          color: white;">				<a href="" tal:attributes="href python: 'portal_ploneradiotool/generatePlaylist?url=' +  context.portal_ploneradiotool.getProperty('stream2_url1') + '&type=m3u'" style="color: white;">Play now!</a>			  </div>			  <div class="PloneRadio_portlet_players">			    <span i18n:translate="text_listenplugin" omit-tag="">listen with plugin:</span><br/>			    <a href="" tal:attributes="href python: 'portal_ploneradiotool/generatePlaylist?url=' +  context.portal_ploneradiotool.getProperty('stream2_url1') + '&type=m3u'">						  <img name="winamp3" src="playericon_winamp.gif" title="MP3 Player" height="24" border="0" align="middle" /></a>                <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=2&plugin=quicktime&quality=1','','scrollbars=no,menubar=no,height=65,width=250,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_quicktime.gif" title="Quicktime-Plugin" height="24" border="0" align="middle" /></a>			    <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=2&plugin=windowsmedia&quality=1','','scrollbars=no,menubar=no,height=165,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img id="hidewindowsmedia3" src="playericon_windowsmedia.gif" title="Windowsmedia-Plugin" height="24" border="0" align="middle" /></a>		        <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=2&plugin=java&quality=1','','scrollbars=no,menubar=no,height=115,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_java.gif" title="Java-Plugin" height="24" border="0" align="middle" />			    </a>			    <span tal:replace="python:context.portal_ploneradiotool.getProperty('stream2_url1_remarks')" tal:condition="python:test(context.portal_ploneradiotool.getProperty('stream2_url1_remarks'))">quality1</span>			  </div>			  <div class="PloneRadio_portlet_players" tal:condition="python:test(context.portal_ploneradiotool.getProperty('stream2_url2'))">			    <a href="" tal:attributes="href python: 'portal_ploneradiotool/generatePlaylist?url=' +  context.portal_ploneradiotool.getProperty('stream2_url2') + '&type=m3u'">						  <img name="winamp4" src="playericon_winamp.gif" alt="Winamp Plugin" height="24" border="0" align="middle" /></a>                <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=2&plugin=quicktime&quality=2','','scrollbars=no,menubar=no,height=65,width=250,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_quicktime.gif" alt="Quicktime-Plugin" height="24" border="0" align="middle" /></a>			    <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=2&plugin=windowsmedia&quality=2','','scrollbars=no,menubar=no,height=165,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img id="hidewindowsmedia4" src="playericon_windowsmedia.gif" alt="Windowsmedia-Plugin" height="24" border="0" align="middle" /></a>		        <a href="#" onClick="javascript:window.open('portal_ploneradiotool/generatePlayerFrameset?stream_nr=2&plugin=java&quality=2','','scrollbars=no,menubar=no,height=115,width=275,resizable=no,toolbar=no,location=no,status=no');">						  <img src="playericon_java.gif" alt="Java-Plugin" height="24" border="0" align="middle" />			    </a>			    <span tal:replace="python:context.portal_ploneradiotool.getProperty('stream2_url2_remarks')" tal:condition="python:test(context.portal_ploneradiotool.getProperty('stream2_url2_remarks'))">quality1</span>			  </div>		    </div>						<tal:block tal:condition="python: test(context.portal_ploneradiotool.getProperty('stream2_loganalysis_enable'))">			  <tal:block tal:define="stream2 python:context.portal_ploneradiotool.getRecentSongs('2')" tal:condition="python: test(stream2[0] != 1)">                <div class="PloneRadio_portlet_current_head">                  <span i18n:translate="text_nowplaying" omit-tag="">now playling:</span>                </div>                <div class="PloneRadio_portlet_current">                  <div class="PloneRadio_portlet_artist" tal:content="python:stream2[1][0]+':'">Artist</div>                  <div class="PloneRadio_portlet_title" tal:content="python:'&quot;'+stream2[1][1]+'&quot;'">Title</div>                  <div class="PloneRadio_portlet_album" tal:condition="python: test(context.portal_ploneradiotool.getProperty('stream2_loganalysis_album_url') != '')">                    <img src="" alt="Album Cover" align="middle" tal:attributes="src python:context.portal_ploneradiotool.getProperty('stream2_loganalysis_album_url')"  />                  </div>                  <div class="PloneRadio_portlet_listeners" tal:condition="python: test((stream2[3] == 'icecast2') & test(context.portal_ploneradiotool.getProperty('stream2_loganalysis_showlisteners'), 1, 0))">                    Derzeit <span tal:replace="python:stream2[4]">0</span> H&ouml;rer                  </div>                </div>                <tal:block tal:condition="python:test((stream2[3] == 'nicecast') & (context.portal_ploneradiotool.getProperty('stream2_loganalysis_recentsongstolist') > 0))">                  <div class="PloneRadio_portlet_recent_head">                    <span i18n:translate="text_recentlyplayed" omit-tag="">recent tracks:</span>                  </div>                  <div class="PloneRadio_portlet_recent" tal:repeat="track python:stream2[2]">                    <tal:block tal:condition="python:test(track[0] != '')">                      <div class="artist" tal:content="python:track[0]+':'">Artist</div>                      <div class="title" tal:content="python:'&quot;'+track[1]+'&quot;'">Title</div>                    </tal:block>                  </div>                </tal:block>              </tal:block>            </tal:block>          </tal:block>        </div>    	<script type="text/javascript" language="javascript">		  <!--			// some blackmagic with supported plugins and icons on			// different platforms ;-)			if (is_mac)			  {				document["winamp1"].src = image1.src;				document["winamp2"].src = image1.src;				document["winamp3"].src = image1.src;				document["winamp4"].src = image1.src;				document.hidewindowsmedia1.style.display='none';				document.hidewindowsmedia2.style.display='none';				document.hidewindowsmedia3.style.display='none';				document.hidewindowsmedia4.style.display='none';			  }			if (is_win) 			  { 			  }		  //-->		</script>    </div></div></body></html>